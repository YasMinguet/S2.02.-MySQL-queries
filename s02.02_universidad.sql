USE universidad; SELECT apellido1, apellido2, nombre FROM persona WHERE tipo='alumno' ORDER BY apellido1 ASC, apellido2 ASC, nombre ASC;
SELECT  apellido1, apellido2, nombre FROM persona WHERE tipo='alumno' AND telefono IS NULL;
SELECT apellido1, apellido2, nombre FROM persona WHERE tipo='alumno' AND YEAR(fecha_nacimiento)=1999;
SELECT apellido1, apellido2, nombre FROM persona WHERE tipo='profesor' AND nif LIKE ('%k') AND telefono IS NULL;
SELECT nombre FROM asignatura WHERE cuatrimestre=1 AND curso=3 AND id_grado=7;
SELECT persona.apellido1, persona.apellido2, persona.nombre AS nombre_profesor, departamento.nombre AS nombre_departamento FROM (persona, departamento)JOIN profesor ON profesor.id_departamento=departamento.id AND persona.id=profesor.id_profesor ORDER BY persona.apellido1 ASC, persona.apellido2 ASC, persona.nombre ASC;
SELECT asignatura.nombre AS asignatura, curso_escolar.anyo_inicio AS año_inicio, curso_escolar.anyo_fin AS año_fin FROM (asignatura, curso_escolar) JOIN (persona, alumno_se_matricula_asignatura) ON persona.id=alumno_se_matricula_asignatura.id_alumno AND alumno_se_matricula_asignatura.id_asignatura=asignatura.id AND curso_escolar.id=alumno_se_matricula_asignatura.id_curso_escolar WHERE persona.nif='26902806M';
SELECT DISTINCT departamento.nombre FROM departamento JOIN profesor ON profesor.id_departamento=departamento.id JOIN asignatura ON profesor.id_profesor=asignatura.id_profesor JOIN grado ON asignatura.id_grado=(SELECT grado.id FROM grado WHERE grado.nombre='Grado en Ingeniería Informática (Plan 2015)');
SELECT DISTINCT persona.apellido1, persona.apellido2, persona.nombre FROM persona JOIN alumno_se_matricula_asignatura ON persona.id=alumno_se_matricula_asignatura.id_alumno AND alumno_se_matricula_asignatura.id_curso_escolar=(SELECT curso_escolar.id FROM curso_escolar WHERE curso_escolar.anyo_inicio=2018 AND curso_escolar.anyo_fin=2019);
SELECT persona.apellido1, persona.apellido2, persona.nombre AS nombre_profesor, departamento.nombre AS nombre_departamento FROM (persona, departamento) CROSS JOIN profesor ON profesor.id_departamento=departamento.id AND profesor.id_profesor=persona.id ORDER BY persona.apellido1 ASC, persona.apellido2 ASC, persona.nombre ASC;
SELECT persona.apellido1, persona.apellido2, persona.nombre AS nombre_profesor, departamento.nombre AS nombre_departamento FROM (persona, departamento) RIGHT JOIN profesor ON profesor.id_departamento=departamento.id AND profesor.id_profesor=persona.id WHERE departamento.id IS NULL;
SELECT departamento.nombre FROM departamento JOIN profesor ON profesor.id_departamento=departamento.id JOIN persona ON persona.id=profesor.id_profesor WHERE profesor.id_departamento IS NULL;
SELECT persona.apellido1, persona.apellido1, persona.nombre FROM persona JOIN profesor ON profesor.id_profesor=persona.id LEFT JOIN asignatura ON asignatura.id_profesor=profesor.id_profesor WHERE asignatura.id_profesor IS NULL;
SELECT nombre FROM asignatura LEFT JOIN profesor USING (id_profesor) WHERE id_profesor IS NULL;
SELECT departamento.nombre FROM departamento LEFT JOIN profesor ON profesor.id_departamento=departamento.id LEFT JOIN asignatura USING (id_profesor) WHERE id_profesor IS NULL;
SELECT COUNT(tipo) AS total_alumnos FROM persona WHERE tipo='alumno';
SELECT COUNT(fecha_nacimiento) AS total_nacidos1999 FROM persona WHERE YEAR(fecha_nacimiento)=1999;
SELECT COUNT(*) AS total_profesores, departamento.nombre FROM departamento JOIN profesor ON profesor.id_departamento=departamento.id GROUP BY departamento.nombre ORDER BY total_profesores DESC;
SELECT persona.apellido1, persona.apellido2, persona.nombre, departamento.nombre FROM persona LEFT JOIN profesor ON profesor.id_profesor=persona.id LEFT JOIN departamento ON profesor.id_departamento=departamento.id;
SELECT grado.nombre AS nombre_grado, asignatura.nombre AS nombre_asignatura FROM grado LEFT JOIN asignatura ON asignatura.id_grado=grado.id ORDER BY asignatura.nombre DESC;
SELECT grado.nombre AS nombre_grado, asignatura.nombre AS nombre_asignatura FROM asignatura JOIN grado ON grado.id=asignatura.id_grado GROUP BY grado.nombre HAVING COUNT(asignatura.id_grado)>40;
SELECT grado.nombre AS nombre_grado, asignatura.tipo AS tipo_asignatura, COUNT(asignatura.creditos) AS total_creditos_asignatura FROM asignatura JOIN grado ON grado.id=asignatura.id_grado;
SELECT curso_escolar.anyo_inicio AS año, COUNT(alumno_se_matricula_asignatura.id_alumno) AS alumnos_matriculados FROM curso_escolar JOIN alumno_se_matricula_asignatura ON alumno_se_matricula_asignatura.id_curso_escolar=curso_escolar.id GROUP BY curso_escolar.anyo_inicio;
SELECT persona.id AS id, persona.nombre, persona.apellido1, persona.apellido2, COUNT(asignatura.id_profesor)AS total_asignaturas FROM persona LEFT JOIN profesor ON profesor.id_profesor=persona.id LEFT JOIN asignatura USING (id_profesor) GROUP BY persona.id ORDER BY total_asignaturas DESC;
SELECT * FROM persona JOIN alumno_se_matricula_asignatura ON alumno_se_matricula_asignatura.id_alumno=persona.id JOIN curso_escolar ON curso_escolar.id=alumno_se_matricula_asignatura.id_curso_escolar JOIN asignatura ON asignatura.id=alumno_se_matricula_asignatura.id_asignatura WHERE persona.fecha_nacimiento=(SELECT MAX(persona.fecha_nacimiento) FROM persona);
SELECT CONCAT(persona.nombre, ', ',persona.apellido1,', ',persona.apellido2) AS profesor FROM persona RIGHT JOIN profesor ON profesor.id_profesor=persona.id JOIN departamento ON departamento.id=profesor.id_departamento LEFT JOIN asignatura USING(id_profesor) WHERE asignatura.nombre IS NULL;